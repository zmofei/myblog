head
    meta(charset="UTF-8")
body
    form(action='#' method="POST" enctype="multipart/form-data")
        input(name="img" type="file")
        button 提交
    p#log
    script.
        document.addEventListener('paste', function (event) {
            var items = event.clipboardData && event.clipboardData.items;
            var file = null;
            if (items && items.length) {
                // 检索剪切板items
                for (var i = 0; i < items.length; i++) {
                    if (items[i].type.indexOf('image') !== -1) {
                        file = items[i].getAsFile();
                        break;
                    }
                }
            }
            // ajax上传
            // 这里是上传
            var xhr = new XMLHttpRequest();
            // 上传进度
            if (xhr.upload) {
                xhr.upload.addEventListener('progress', function (event) {
                    log.innerHTML = '正在上传，进度：' + Math.round(100 * event.loaded / event.total) / 100 + '%';
                }, false);
            }
            // 上传结束
            xhr.onload = function () {
                var responseText = xhr.responseText;
                log.innerHTML = '上传成功，地址是：' + responseText;
            };
            xhr.onerror = function () {
                log.innerHTML = '<span style="color:red;">网络异常，上传失败</span>';
            };
            xhr.open('POST', '#', true);
            var formData = new FormData(); 
            formData.append('img', file);
            //- xhr.setRequestHeader('img', encodeURIComponent(file));
            xhr.send(formData);
            //- console.log(file)
        });